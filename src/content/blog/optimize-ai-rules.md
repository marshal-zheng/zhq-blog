---
author: ZHQ
pubDatetime: 2025-02-26T20:30:34.000+08:00
title: 'AI规则精细控制与规范'
featured: false
draft: false
tags:
  - 'AI'
description: '记录如何解决AI过度主动性问题，以及这些规则对开发流程的启示。'
---

## 为什么需要精细化控制？ 🤔

最近在使用 AI 辅助开发时，经常遇到过这样的情况：

- AI 一口气生成了大量代码，看得头晕眼花 😵‍💫
- 有时候只是想改一个小功能，AI 却修改了一堆相关文件 😅
- AI 自作主张优化了代码，结果引入了新的问题 🤦‍♂️

不断的调整Prompt感觉主要原因是 AI 的"过度主动性"问题。为了解决这个问题, 针对现有的Prompt做审计改造, 不断调整实践发现使用精细化的规则控制, 可以让AI的行为更靠近预期。

## 优化后的规则

```markdown

## 解决AI过度主动性的新规则

### 节奏与范围控制
1. **明确的检查点要求**
   - 完成每个逻辑单元的工作后必须暂停，并等待明确的批准后再继续。
   - 在没有确认的情况下，绝不要在一个会话中实施多个任务。

2. **最小化实现规则**
   - 始终只实现满足指定任务要求的绝对最小内容。
   - 当对范围有疑问时，选择更狭窄的解释。

3. **分阶段开发协议**
   - 对于每次更改，遵循严格的“提议 → 批准 → 实施 → 审查”周期。
   - 实施每个组件后，停止并提供清晰的更改总结以及剩余工作。

4. **范围边界执行**
   - 如果任务似乎需要更改超出最初识别的文件或组件，请暂停并请求明确许可。
   - 在没有事先批准的情况下，绝不要进行“顺便”改进。

### 沟通
1. **强制检查点**
   - 每次更改后，暂停并总结已完成的工作和接下来的计划。
   - 将每个实现的功能标记为[COMPLETE]，并询问是否应继续下一个项目。

2. **复杂性警告系统**
   - 如果实施需要涉及超过3个文件，将其标记为[COMPLEX CHANGE]并等待确认。
   - 在实施任何更改之前，主动识别潜在的连锁反应。

3. **变更规模指示器**
   - 将所有提议的更改分类为[MINOR]（1-5行）、[MODERATE]（5-20行）或[MAJOR]（20+行）。
   - 对于[MAJOR]更改，提供详细的实施计划并等待明确批准。

4. **可测试性重点**
   - 每次实施必须在最早的可测试点暂停。
   - 在确认当前实施有效之前，绝不要越过可测试的检查点。

```

## 新规则详解：AI 的"礼仪课" 📚

### 1. 节奏控制

想办法让AI学会控制节奏, 循序渐进：

```typescript
// 过去的 AI：一次性生成整个功能
function createUserSystem() {
  // 200行代码轰炸...
}

// 现在的 AI：
AI: "我先帮您创建用户注册的基础结构，可以吗？"
用户: "好的"
AI: "基础结构已创建 [COMPLETE]，下一步是添加表单验证，需要继续吗？"
```

### 2. 范围控制：让AI不要"顺手"改太多 ✋

加入新规则后，AI 现在会严格遵守以下原则：

- **最小实现原则**：只做必要的修改
- **明确边界**：不擅自修改其他文件
- **请求许可**：需要改动其他部分时会先询问

### 3. 复杂度提醒 ⚠️

当修改可能带来连锁反应时，AI 会及时提醒：

```bash
[COMPLEX CHANGE] 这个修改会影响以下文件：
- UserService.ts
- AuthMiddleware.ts
- DatabaseConfig.ts
是否继续？
```

### 4. 变更规模标记：一目了然 📏

每个修改都会标注规模：
- [MINOR] 1-5行的小改动
- [MODERATE] 5-20行的中等改动
- [MAJOR] 20+行的大改动

## 实战案例：新规则如何改善开发体验 🛠️

让我们看一个实际的例子。在我的项目中，使用新规则后的开发流程：

1. **需求分析**
```typescript
用户: "帮我添加用户导出功能"
AI: "这个功能涉及到数据处理和文件下载，建议分步实现：
    1. 添加数据查询接口
    2. 实现导出逻辑
    3. 添加下载功能
    从哪一步开始？"
```

2. **分步实现**
```typescript
// 第一步：数据查询接口 [MINOR]
export async function queryUserData() {
  // 10行代码...
}

AI: "数据查询接口已完成[COMPLETE]，要继续实现导出逻辑吗？"
```

## 开发者受益：新规则带来的收益 🎁

1. **更好的代码质量** ✨
   - 每个修改都经过确认
   - 避免了过度优化
   - 更容易进行代码审查

2. **更清晰的开发流程** 📝
   - 渐进式开发
   - 明确的检查点
   - 可控的变更范围

3. **更少的返工** 🔄
   - 及时发现问题
   - 避免范围蔓延
   - 减少意外修改

## 最佳实践建议 💡

1. **尽量合理最小化提交**
   ```bash
   # 每完成一个小功能就提交
   git add .
   git commit -m "feat: 添加用户查询接口 [MINOR]"
   ```

2. **保持对话**
   - 多和 AI 交流，确认理解是否一致
   - 不要害怕问"为什么"
   - 及时纠正 AI 的错误方向

3. **控制修改范围**
   - 一次只关注一个功能点
   - 先实现核心功能，再考虑优化
   - 重要修改要有测试用例

## 总结 🎯

使用精细化规则不仅让 AI 变得更加规范，也为开发者带来了更好的开发体验。就像一个好的队友，它学会了：
- 不抢跑 🏃‍♂️
- 多沟通 💬
- 讲规则 📋
- 重质量 ✨

总结后发现使用AI的逻辑和日常的团队协作逻辑大同小异，方法对了都能从中受益。