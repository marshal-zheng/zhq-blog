---
author: ZHQ
pubDatetime: 2025-06-12T09:45:00+08:00
title: 'VSCode 远程开发：使用 Remote-SSH 插件连接服务器指南'
featured: false
draft: false
tags:
  - 'DevOps'
description: '介绍如何使用VSCode的Remote-SSH插件连接远程服务器'
---

VSCode 的 `Remote - SSH` 插件允许开发者直接连接到远程主机，并在其上进行文件编辑、终端操作和调试，提供与本地开发几乎无异的流畅体验。本文将详细介绍如何通过密码方式配置并连接到远程服务器。

---

## 一、前置条件确认

在开始配置前，请确保满足以下条件：

1.  **VSCode 插件已安装**：
    *   在 VSCode 扩展市场中搜索并安装 `Remote - SSH` (由 Microsoft 发布)。

2.  **远程主机信息明确**：
    *   **IP 地址**: `192.168.0.67`
    *   **用户名**: `root`
    *   **密码**: `12qw`
    *   **SSH 端口**: `22` (若非默认端口，请使用实际端口号)

## 二、配置 SSH 主机

有两种主流的配置方式：通过 VSCode 命令面板或直接编辑配置文件。

### 方式一：通过 VSCode 命令面板 (推荐)

此方法利用图形界面引导，操作直观。

1.  打开 VSCode，使用快捷键 `Ctrl+Shift+P` (macOS: `Cmd+Shift+P`) 打开命令面板。
2.  输入并选择 `Remote-SSH: Add New SSH Host...`。
3.  在弹出的输入框中，按 `ssh <user>@<hostname>` 格式输入连接命令，然后回车。
    ```bash
    ssh root@192.168.0.67
    ```
4.  选择一个 SSH 配置文件来保存该主机信息。通常选择第一个，即用户目录下的 `config` 文件 (`~/.ssh/config`)。

配置完成后，右下角会弹出提示，表示主机已添加。

### 方式二：手动编辑 SSH 配置文件

对于熟悉 SSH 配置的开发者，可以直接编辑文件，实现更灵活的控制。

1.  找到并打开 SSH 配置文件。在 Linux 或 macOS 系统中，路径通常是 `~/.ssh/config`。
2.  在文件中添加以下内容：

    ```ssh-config
    # 为主机设置一个别名，方便连接
    Host codeserver-demo
        HostName 192.168.0.67
        User root
        Port 22
    ```
    *   `Host`: 自定义的主机别名，后续连接时使用此名称。
    *   `HostName`: 远程主机的 IP 地址或域名。
    *   `User`: 登录用户名。
    *   `Port`: SSH 端口号。

## 三、连接与登录

配置完成后，即可发起连接。

1.  再次打开命令面板 (`Ctrl+Shift+P`)。
2.  输入并选择 `Remote-SSH: Connect to Host...`。
3.  从列表中选择你刚刚配置的主机（如 `192.168.0.67` 或别名 `codeserver-demo`）。
4.  VSCode 会打开一个新窗口进行连接。此时，系统会提示你选择远程服务器的操作系统平台（如 Linux）。
5.  接着，在弹出的输入框中输入你的登录密码 (`12qw`) 并回车。

**注意**：
*   首次连接时，系统会询问是否信任该主机的指纹 (fingerprint)，输入 `yes` 并回车即可。
*   如果连接失败或未提示输入密码，请参考下文的排查技巧。

连接成功后，VSCode 窗口的左下角会显示绿色的远程连接状态，如 `SSH: 192.168.0.67`。现在，你就可以通过 "文件" > "打开文件夹" 来浏览和操作服务器上的项目了。

## 四、问题排查技巧

如果在连接过程中遇到问题，可以尝试以下方法进行排查。

1.  **清除旧的或错误的 SSH 指纹缓存**：
    如果服务器重装或 IP 地址被复用，可能导致指纹不匹配。在**本地终端**执行以下命令清除指定主机的缓存：
    ```bash
    ssh-keygen -R 192.168.0.67
    ```

2.  **使用命令行直接验证**：
    在 VSCode 之外，打开一个**本地终端**，直接尝试 SSH 连接。这可以最直接地暴露网络或认证问题。
    ```bash
    ssh root@192.168.0.67
    ```
    如果此命令能够正常提示输入密码并登录成功，那么 VSCode 的 Remote-SSH 插件通常也能成功。如果此命令失败，则需要先解决底层的 SSH 连接问题。

## 五、进阶：配置 SSH 密钥实现免密登录

频繁输入密码既繁琐又不安全。在生产环境中，强烈推荐使用 SSH 密钥对进行认证，实现安全、便捷的免密登录。

配置密钥登录是 SSH 的标准实践，大致步骤如下：
1.  在本地机器生成 SSH 密钥对（公钥和私钥）。
2.  将公钥的内容追加到远程服务器的 `~/.ssh/authorized_keys` 文件中。
3.  在 VSCode 的 SSH 配置文件中，可以通过 `IdentityFile` 字段指定私钥路径。

这种方式是远程开发的首选，建议所有开发者掌握。